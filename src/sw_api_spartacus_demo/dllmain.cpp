#pragma once
// Unused sw_api exports?
//#pragma comment(linker,"/export:LZ4_compress=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_compress\",@1")
//#pragma comment(linker,"/export:LZ4_compressBound=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_compressBound\",@2")
//#pragma comment(linker,"/export:LZ4_compress_continue=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_compress_continue\",@3")
//#pragma comment(linker,"/export:LZ4_compress_default=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_compress_default\",@4")
//#pragma comment(linker,"/export:LZ4_compress_destSize=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_compress_destSize\",@5")
//#pragma comment(linker,"/export:LZ4_compress_fast=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_compress_fast\",@6")
//#pragma comment(linker,"/export:LZ4_compress_fast_continue=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_compress_fast_continue\",@7")
//#pragma comment(linker,"/export:LZ4_compress_fast_extState=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_compress_fast_extState\",@8")
//#pragma comment(linker,"/export:LZ4_compress_limitedOutput=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_compress_limitedOutput\",@9")
//#pragma comment(linker,"/export:LZ4_compress_limitedOutput_continue=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_compress_limitedOutput_continue\",@10")
//#pragma comment(linker,"/export:LZ4_compress_limitedOutput_withState=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_compress_limitedOutput_withState\",@11")
//#pragma comment(linker,"/export:LZ4_compress_withState=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_compress_withState\",@12")
//#pragma comment(linker,"/export:LZ4_create=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_create\",@13")
//#pragma comment(linker,"/export:LZ4_createStream=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_createStream\",@14")
//#pragma comment(linker,"/export:LZ4_createStreamDecode=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_createStreamDecode\",@15")
//#pragma comment(linker,"/export:LZ4_decompress_fast=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_decompress_fast\",@16")
//#pragma comment(linker,"/export:LZ4_decompress_fast_continue=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_decompress_fast_continue\",@17")
//#pragma comment(linker,"/export:LZ4_decompress_fast_usingDict=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_decompress_fast_usingDict\",@18")
//#pragma comment(linker,"/export:LZ4_decompress_fast_withPrefix64k=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_decompress_fast_withPrefix64k\",@19")
//#pragma comment(linker,"/export:LZ4_decompress_safe=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_decompress_safe\",@20")
//#pragma comment(linker,"/export:LZ4_decompress_safe_continue=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_decompress_safe_continue\",@21")
//#pragma comment(linker,"/export:LZ4_decompress_safe_partial=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_decompress_safe_partial\",@22")
//#pragma comment(linker,"/export:LZ4_decompress_safe_usingDict=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_decompress_safe_usingDict\",@23")
//#pragma comment(linker,"/export:LZ4_decompress_safe_withPrefix64k=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_decompress_safe_withPrefix64k\",@24")
//#pragma comment(linker,"/export:LZ4_freeStream=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_freeStream\",@25")
//#pragma comment(linker,"/export:LZ4_freeStreamDecode=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_freeStreamDecode\",@26")
//#pragma comment(linker,"/export:LZ4_loadDict=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_loadDict\",@27")
//#pragma comment(linker,"/export:LZ4_resetStream=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_resetStream\",@28")
//#pragma comment(linker,"/export:LZ4_resetStreamState=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_resetStreamState\",@29")
//#pragma comment(linker,"/export:LZ4_saveDict=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_saveDict\",@30")
//#pragma comment(linker,"/export:LZ4_setStreamDecode=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_setStreamDecode\",@31")
//#pragma comment(linker,"/export:LZ4_sizeofState=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_sizeofState\",@32")
//#pragma comment(linker,"/export:LZ4_sizeofStreamState=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_sizeofStreamState\",@33")
//#pragma comment(linker,"/export:LZ4_slideInputBuffer=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_slideInputBuffer\",@34")
//#pragma comment(linker,"/export:LZ4_uncompress=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_uncompress\",@35")
//#pragma comment(linker,"/export:LZ4_uncompress_unknownOutputSize=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_uncompress_unknownOutputSize\",@36")
//#pragma comment(linker,"/export:LZ4_versionNumber=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_versionNumber\",@37")
//#pragma comment(linker,"/export:LZ4_versionString=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.LZ4_versionString\",@38")

// Used as seen in dependencies and decomp
//#pragma comment(linker,"/export:SW_CCSys_CreateInternalModule=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_CreateInternalModule\",@39")
//#pragma comment(linker,"/export:SW_CCSys_DynamicInit=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_DynamicInit\",@40")
//#pragma comment(linker,"/export:SW_CCSys_GetPInterface=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_GetPInterface\",@42")
//#pragma comment(linker,"/export:SW_CCSys_GetUInterface=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_GetUInterface\",@44")
//#pragma comment(linker,"/export:SW_CCSys_Init=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_Init\",@45")
//#pragma comment(linker,"/export:SW_CCSys_InitCallbackFunc=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_InitCallbackFunc\",@46")
//#pragma comment(linker,"/export:SW_CCSys_ProcessApiCb=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_ProcessApiCb\",@48")
//#pragma comment(linker,"/export:SW_CCSys_RegisterCallResult=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_RegisterCallResult\",@49")
//#pragma comment(linker,"/export:SW_CCSys_RemoveCallbackFunc=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_RemoveCallbackFunc\",@50")
//#pragma comment(linker,"/export:SW_CCSys_Shutdown=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_Shutdown\",@51")
//#pragma comment(linker,"/export:SW_CCSys_UnregisterCallResult=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_UnregisterCallResult\",@53")

// Useless, can just return false and ignore altogether
//#pragma comment(linker,"/export:SW_HasAchievements=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_HasAchievements\",@54")
//#pragma comment(linker,"/export:SW_HasInvites=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_HasInvites\",@55")
//#pragma comment(linker,"/export:SW_HasLeaderboards=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_HasLeaderboards\",@56")

// Unused
//#pragma comment(linker,"/export:SW_CCSys_GetP=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_GetP\",@41")
//#pragma comment(linker,"/export:SW_CCSys_GetU=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_GetU\",@43")
//#pragma comment(linker,"/export:SW_CCSys_IsBackendActive=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_IsBackendActive\",@47")
//#pragma comment(linker,"/export:SW_CCSys_TestInitialConditions=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_CCSys_TestInitialConditions\",@52")
//#pragma comment(linker,"/export:SW_RegisterCallback=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_RegisterCallback\",@57")
//#pragma comment(linker,"/export:SW_UnregisterCallback=\"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.SW_UnregisterCallback\",@58")

#include "windows.h"
#include "ios"
#include "fstream"

typedef INT *(*SW_CCSys_CreateInternalModule_Type)(char * string_SteamClient017);
typedef INT *(*SW_CCSys_DynamicInit_Type)(int * callbackCounterAndContext);
typedef INT *(*SW_CCSys_GetPInterface_Type)();
typedef INT *(*SW_CCSys_GetUInterface_Type)();
typedef BOOL(*SW_CCSys_Init_Type)();
typedef INT *(*SW_CCSys_InitCallbackFunc_Type)(int * callbackFunc, int callbackId);
typedef VOID(*SW_CCSys_ProcessApiCb_Type)();
typedef VOID(*SW_CCSys_RegisterCallResult_Type)(int * CCallResult, UINT64 maybeId);
typedef VOID(*SW_CCSys_RemoveCallbackFunc_Type)(int * callbackFunc);
typedef VOID(*SW_CCSys_Shutdown_Type)();
typedef VOID(*SW_CCSys_UnregisterCallResult_Type)(int * CCallResult, int * field1, int * field2);
typedef BOOL(*SW_HasAchievements_Type)();

// Load original DLL
HMODULE hModule = LoadLibrary(L"c:\\Program Files (x86)\\Steam\\steamapps\\common\\Red Faction Guerrilla Re-MARS-tered\\sw_api_original.dll");

VOID DebugToFile(LPCSTR szInput)
{
    std::ofstream log("sw_api_spartacus.log", std::ios_base::app | std::ios_base::out);
    log << szInput;
    log << "\n";
}

BOOL APIENTRY DllMain(HMODULE hModule, DWORD  ul_reason_for_call, LPVOID lpReserved)
{
    switch (ul_reason_for_call)
    {
    case DLL_PROCESS_ATTACH:
    case DLL_THREAD_ATTACH:
    case DLL_THREAD_DETACH:
    case DLL_PROCESS_DETACH:
        break;
    }
    return TRUE;
}

INT * SW_CCSys_CreateInternalModule_Proxy(char * string_SteamClient017)
{
	DebugToFile("SW_CCSys_CreateInternalModule");
	SW_CCSys_CreateInternalModule_Type original = (SW_CCSys_CreateInternalModule_Type)GetProcAddress(hModule, "SW_CCSys_CreateInternalModule");
	return original(string_SteamClient017);
}
INT * SW_CCSys_DynamicInit_Proxy(int * callbackCounterAndContext)
{
	DebugToFile("SW_CCSys_DynamicInit");
	SW_CCSys_DynamicInit_Type original = (SW_CCSys_DynamicInit_Type)GetProcAddress(hModule, "SW_CCSys_DynamicInit");
	return original(callbackCounterAndContext);
}
INT * SW_CCSys_GetPInterface_Proxy()
{
	DebugToFile("SW_CCSys_GetPInterface");
	SW_CCSys_GetPInterface_Type original = (SW_CCSys_GetPInterface_Type)GetProcAddress(hModule, "SW_CCSys_GetPInterface");
	return original();
}
INT * SW_CCSys_GetUInterface_Proxy()
{
	DebugToFile("SW_CCSys_GetUInterface");
	SW_CCSys_GetUInterface_Type original = (SW_CCSys_GetUInterface_Type)GetProcAddress(hModule, "SW_CCSys_GetUInterface");
	return original();
}
BOOL SW_CCSys_Init_Proxy()
{
	DebugToFile("SW_CCSys_Init");
	SW_CCSys_Init_Type original = (SW_CCSys_Init_Type)GetProcAddress(hModule, "SW_CCSys_Init");
	return original();
}
INT * SW_CCSys_InitCallbackFunc_Proxy(int * callbackFunc, int callbackId)
{
	DebugToFile("SW_CCSys_InitCallbackFunc");
	SW_CCSys_InitCallbackFunc_Type original = (SW_CCSys_InitCallbackFunc_Type)GetProcAddress(hModule, "SW_CCSys_InitCallbackFunc");
	return original(callbackFunc, callbackId);
}
VOID SW_CCSys_ProcessApiCb_Proxy()
{
	DebugToFile("SW_CCSys_ProcessApiCb");
	SW_CCSys_ProcessApiCb_Type original = (SW_CCSys_ProcessApiCb_Type)GetProcAddress(hModule, "SW_CCSys_ProcessApiCb");
	return original();
}
VOID SW_CCSys_RegisterCallResult_Proxy(int * CCallResult, UINT64 maybeId)
{
	DebugToFile("SW_CCSys_RegisterCallResult");
	SW_CCSys_RegisterCallResult_Type original = (SW_CCSys_RegisterCallResult_Type)GetProcAddress(hModule, "SW_CCSys_RegisterCallResult");
	return original(CCallResult, maybeId);
}
VOID SW_CCSys_RemoveCallbackFunc_Proxy(int * callbackFunc)
{
	// not called?
	DebugToFile("SW_CCSys_RemoveCallbackFunc");
	SW_CCSys_RemoveCallbackFunc_Type original = (SW_CCSys_RemoveCallbackFunc_Type)GetProcAddress(hModule, "SW_CCSys_RemoveCallbackFunc");
	return original(callbackFunc);
}
VOID SW_CCSys_Shutdown_Proxy()
{
	DebugToFile("SW_CCSys_Shutdown");
	SW_CCSys_Shutdown_Type original = (SW_CCSys_Shutdown_Type)GetProcAddress(hModule, "SW_CCSys_Shutdown");
	return original();
}
VOID SW_CCSys_UnregisterCallResult_Proxy(int * CCallResult, int * field1, int * field2)
{
	// not called?
	DebugToFile("SW_CCSys_UnregisterCallResult");
	SW_CCSys_UnregisterCallResult_Type original = (SW_CCSys_UnregisterCallResult_Type)GetProcAddress(hModule, "SW_CCSys_UnregisterCallResult");
	return original(CCallResult, field1, field2);
}
BOOL ReturnFalse()
{
	// for useless functions, can just return false and ignore altogether
	//DebugToFile("SW_HasAchievements");
	//SW_HasAchievements_Type original = (SW_HasAchievements_Type)GetProcAddress(hModule, "SW_HasAchievements");
	//return original();
	return false;
}